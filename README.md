# Spring_Microservice_Alpha
Learning Microservices with Spring and Spring boot

> Installing Maven, Download Maven, extract the zip folder, update bin folder path in system path variable.
> Verify Maven installation with 'mvn -version' command in command prompt.
> Download and install STS (Spring Tool Suite).

### Creating initial project
- Can be created in many ways using
    - Spring CLI (Command line interface)
    - Spring Tool Suite IDE
    - Spring Initializr (A web interface accessible from http:start.spring.io)
- To install spring cli, Download the cli zip from spring.io and add the bin folder in system path variables.

### Creating initial app with STS
- Open STS >> File >> New >> Spring Starter Project
- Provide a name, Type as maven, packaging as jar, java version as 8, language as jar.
- You can edit the other details as per need >> Click next
- Select spring boot version you prefer.
- Select Spring web or web and click finish.
- The application will be created with Bill of material pattern.

### Application class
- We will have a single application class with annotation @SpringBootApplication
- Which will say to spring that this is our primary component.
- @SpringBootApplication encapsulates three other annotations
    1. @Configuration - Which specifies the contained class have one or more @Bean definitions
    2. @EnableAutoConfiguration - Will enable spring to automatically configure the spring application, based on the dependencies present in the class-path.
    3. @ComponentScan - @Configuration is meta annotated with @Component so they are eligible for component scanning.

- Creating a new application class for the enpoints(url)
- Aim is to display a message on invoking the url /greeting.
- Create an object with string for sending message, which contains getters and setters
- Create a class with an annotation '@RestController', This annotation will create a restful implementation of a service.
- Programs for the above mentioned are in the project InitialApp
- To run this application >> Click on project >> Run as >> Spring boot application

> Command to run a  spring boot application from command line ``` mvn spring-boot:run ```

### Creating the above application as jar and running it outside STS
- Open command prompt, Navigate to the project folder
- run ``` mvn install ``` >> After it completes you will find a jar in the target folder.
- Here the jar generated is InitialApp-0.0.1-SNAPSHOT.jar
- To run this jar use ``` java -jar target/InitialApp-0.0.1-SNAPSHOT.jar ```

### Testing the application created above
- Tools to test a rest application postman, soap-ui, paw, Advanced Rest Client.
- easiest way is to run ``` curl localhost:8080 ``` in a command prompt.

> We can also test the service by using the default test class generated by spring boot.
> The code for the same is present in the initial application app.

### @SpringBootTest
- Annotation that allows the testing of spring boot applications, by enabling spring boot features during test execution.
- webEnvironment = WebEnvironment.RANDOM_PORT property directs spring boot, to bind application to random port, which will be handy during a test involving multiple instances of same app.
- TestRestTemplate is being used for calling a restful service. This also abstracts the lower level details of HTTP client.
- TestRestTemplate automatically detects the actual port used by spring boot.

> To test this open terminal and run ``` mvn install ```
> From STS open Junit view and click on run test.

### HATEOAS (Hyper Media As The Engine Of Application State)
- Useful for building conversational style microservices which exibit strong affinity between UI and its backend services.
- HATEOAS is a REST service pattern in which navigation links are provided as part of payload metadata.
- Useful methodology for responsive mobile and web applications, where client downloads additional data based on user navigation pattern.

### HAL Browser
- HAL is a format based on JSON, which establishes conventions for representing hyperlinks between resources.
- HAL Browser is a handy API browser for HAL+JSON data. Helps APIs to be more explorable and discoverable.

### Creating a HATEOS and HAL browser project.
- Choose Spring Web, Spring HATEOAS and Spring HAL Browser. Generate the project.
- Example HATEOAS project is attached.
- To access HAL browser navigate to ``` /browser/index.html ``` URI.
- for the  attached project ``` http://localhost:9000/browser/index.html ```